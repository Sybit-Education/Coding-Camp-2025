<div class="relative grid grid-cols-1 justify-center">
  <h1 class="sr-only">1200 Jahre Radolfzell</h1>
  <!-- Skip-Link für Screenreader -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:z-50 focus:bg-white focus:p-2"
    >Zum Hauptinhalt springen
  </a>

  <!-- Debug-Info -->

  @if (displayEvents.length === 0) {
    <div class="mb-4 rounded bg-yellow-100 p-4">Lade Events... ({{ events.length }} Events verfügbar)</div>
  }

  <!-- Aktuelle Events -->
  <section [attr.aria-labelledby]="'events-heading'">
    <h2 [id]="'events-heading'">Aktuelle Veranstaltungen</h2>

    <!-- Horizontaler Scroll-Container für Events -->
    @if ((sharedStateService.getSizeOfScreen() | async) === screenSize.SMALL) {
      <div class="scrollbar-hide card-snap mb-5 w-full snap-x snap-mandatory overflow-x-auto scroll-smooth">
        <div class="event-row flex min-w-max gap-4 px-2">
          @for (event of displayEvents; track $index) {
            <app-event-card
              class="h-full w-[calc(100vw-6rem)] snap-center"
              [event]="event.isMore ? null : event"
              [isMoreCard]="!!event.isMore"
              [attr.aria-label]="
                event.name
                  ? 'Veranstaltung: ' + event.name + ' am ' + (event.date_start | date: 'dd.MM.yyyy')
                  : 'Mehr Veranstaltungen anzeigen'
              "
            ></app-event-card>
          }
        </div>
      </div>
    } @else {
      <div class="mb-10 flex flex-wrap justify-center gap-4">
        @for (event of displayEvents; track $index) {
          <app-event-card
            class="w-full max-w-sm flex-shrink-0 sm:w-1/2 lg:w-1/3"
            [event]="event.isMore ? null : event"
            [isMoreCard]="!!event.isMore"
            [attr.aria-label]="
              event.name
                ? 'Veranstaltung: ' + event.name + ' am ' + (event.date_start | date: 'dd.MM.yyyy')
                : 'Mehr Veranstaltungen anzeigen'
            "
          ></app-event-card>
        }
      </div>
    }
  </section>

  <div class="flex justify-center">
    <app-all-event-button />
  </div>

  <!-- Kategorien -->
  <section [attr.aria-labelledby]="'categories-heading'" class="mt-12 mb-12">
    <h2 [id]="'categories-heading'">
      Themen Kategorien
    </h2>

    <div class="mr-2 ml-2 grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4">
      @for (kategorie of topicsOrTypes; track kategorie.id) {
        <app-kategorie-card [color]="kategorie.color" [text]="kategorie.name" />
      }
    </div>
  </section>
</div>
