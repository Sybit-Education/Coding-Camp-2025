<div
  [routerLink]="['/event', event?.id?.id]"
  [queryParams]="{ filterQuery: filterQuery ? filterQuery : null }"
  class="justify-top card flex h-full flex-col overflow-hidden"
>
  <!-- Bildbereich: feste, vorhersagbare Höhe -->
  <div class="relative h-40 w-full overflow-hidden bg-gray-100">
    <div class="pointer-events-none absolute top-2 left-2 z-10">
      <app-event-type-pill class="text-xs" [event]="event"></app-event-type-pill>
    </div>
    @if (event?.['isPast']) {
      <ul class="pill-list pointer-events-none absolute top-2 right-2 z-10">
        <li class="border-0 bg-gray-700 text-xs text-white">
          {{ 'EVENTS.PAST_EVENT' | translate }}
        </li>
      </ul>
    }
    @if (mediaUrl) {
      <img [src]="mediaUrl" [alt]="event?.name || 'Event Bild'" class="h-full w-full object-cover" [attr.loading]="'lazy'" />
    } @else {
      <div class="flex h-full w-full items-center justify-center bg-gray-100">
        <img
          src="/Logo_Radolfzell1200_Geschtern.Heit.Morge.jpg"
          alt="1200 Jahre Radolfzell Logo"
          class="h-3/4 w-3/4 object-contain opacity-30"
        />
      </div>
    }
  </div>

  <!-- Contentbereich: flex-1 stellt sicher, dass Footer immer unten bleibt -->
  <div class="flex w-full flex-1 flex-col pr-4 pl-4 text-left">
    <!-- Titel: 2 Zeilen begrenzt -->
    <div class="pt-1">
      <h3 class="line-clamp-2 text-base leading-tight font-semibold text-gray-800">
        {{ event?.name || 'Event Name' }}
      </h3>
    </div>

    <!-- Pills: feste Höhe, overflow-hidden (verhindert, dass unterschiedlich viele Pills die Höhe verändern) -->
    <div class="mt-2 min-h-8 h-auto overflow-hidden">
      <app-event-topic-pill-list [event]="event" [eventCard]="true" />
    </div>

    <!-- Meta (Datum / Ort): immer am unteren Rand, gleiche Position -->
    <div class="mt-auto pb-2">
      <div class="mb-1 flex items-center text-gray-700">
        <app-icon name="calendar" class="mr-2 h-4 w-4" aria-hidden="true"></app-icon>
        <span class="truncate text-sm">
          {{ event?.date_start || null | dateTimeRange: event?.date_end || null }}
        </span>
      </div>
      <div class="flex items-center text-gray-700">
        <app-icon name="location" class="mr-2 h-4 w-4" aria-hidden="true"></app-icon>
        <span class="truncate text-sm">{{ location?.name || 'Ort wird bekannt gegeben' }}</span>
      </div>
    </div>
  </div>

  <app-favorite-button
    [eventId]="event?.id"
    [isSmall]="true"
    class="absolute top-2 right-2 rounded-full bg-white shadow-md transition-colors"
  ></app-favorite-button>
</div>
